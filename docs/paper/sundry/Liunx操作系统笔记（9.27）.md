# Liunx操作系统笔记（9.27）



## tail：查看命令

格式：tail 【选项】文件/路径

作用：从末尾行内容开始查看。

选项：行数（从末尾起）

![image-20240927144500047](imgs\Liunx操作系统笔记（9.27）\image-20240927144500047.png)

## cp：复制文件、文件夹

cp命令可以用于复制文件\文件央，cp命令来自英文单词：copy

```shell
语法:cp [-r] 参数1 参数2
```

- -r选项，可选，用于复制文件央使用，表示递归。
- 参数1，Linux路径，表示被复制的文件或文件央。
- 参数2，Linux路径，表示要复制去的地方。

![image-20240927144621113](imgs\Liunx操作系统笔记（9.27）\image-20240927144621113.png)

![image-20240927144721533](imgs\Liunx操作系统笔记（9.27）\image-20240927144721533.png)



## 通配符

星号(*)通常用于匹配任何字符，包括数字、字母和符号。你可以使用星号指定应用程序需要查找的字符相应位置的任何字符。

![image-20240927144938077](imgs\Liunx操作系统笔记（9.27）\image-20240927144938077.png)

## mkdir：创建新的目录

通过mkdir命令可以创建新的目录(文件夹)

```shell
mkdir [-p] Linux路径
```

- 参数必填，表示Linux路径，即要创建的文件夫的路径，相对路径或绝对路径均可。

- -p选项可选，表示自动创建不存在的父目录，适用于创建连续多层级的目录。

![image-20240927145232981](imgs\Liunx操作系统笔记（9.27）\image-20240927145232981.png)

``注意：创建文件夹需要修改权限，请确保操作均在HOME目录内，不要在HOME外操作，涉及到权限问题，HOME外无法成功。``



## ln：快捷方式

ln是linux的一个重要命令，它的功能是为某一个文件在另外一个位置建立一个同步的链接。当我们需要在不同的目录，用到相同的文件时，我们不需要在每一个需要的目录下都放一个必须相同的文件，我们只要在某个固定的目录，放上该文件，然后在其它的目录下用命令链接(link)它就可以，不必重复的占用磁盘空间。

- 软链接：
  - 以路径的形多式存在。类似于Windows操作系统中的快捷方式。
  - 软链接可以跨文件系统，硬链接不可以。
  - 软链接可以对一个不存在的文件名进行链接。
  - 软链接可以对目录进行链接。
- 硬链接：
  - 以文件副本的形式存在。但不占用实际空间。
  - 不允许给目录创建硬链接。
  - 硬链接只有在同一个文件系统中才能创建。

![image-20240927145443560](imgs\Liunx操作系统笔记（9.27）\image-20240927145443560.png)

- 第一，|n命令会保持每一处链接文件的同步性，也就是说，不论你改动了哪一处，其它的文件都会发生相同的变化。

- 第二，|n的链接又分软链接和硬链接两种，软链接就是In-s 源文件 目标文件，它只会在你选定的位置上生成一个文件的镜像，不会占用磁盘空间，硬链接n 源文件目标文件，没有参数-s，它会在你选定的位置上生成一个和源文件大小相同的文件，无论是软链接还是硬链接，文件都保持同步变化。

- ln指令用在链接文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一个已经存在的目录，则会把前面指定的所有文件或目录复制到该目录中。若同时指定多个文件或目录，且最后的目的地并非是一个已存在的目录，则会出现错误信息。

`不能针对文件夹创建硬链接`



## mv：移动文件或文件夹

mv命令可以用于移动文件文件夹，mv命令来自英文单词：move

```shell
mv 参数1 参数2
```

- 参数1，Linux路径，表示被移动的文件或文件夹
- 参数2，Linux路径，表示要移动去的地方，如果目标存在，则进行改名，确保目标存在。

![image-20240927150446840](imgs\Liunx操作系统笔记（9.27）\image-20240927150446840.png)

![image-20240927150928161](imgs\Liunx操作系统笔记（9.27）\image-20240927150928161.png)

## rm：删除文件

rm命令可用于删除文件、文件夹

```shell
rm [-r -f] 参数1 参数2 ......参数N
```

- 同cp命令一样，-r选项用于删除文件夹
- -f表示force，强制删除(不会弹出提示确认信息)中
  - 普通用户删除内容不会弹出提示，只有root管理员用户删除内容会有提示·所以一般普通用户用不到-f选项
- 参数1、参数2、.....·、参数N表示要删除的文件或文件夹路径，按照空格隔开

```shell
rm -rf /
```

![image-20240927153437855](imgs\Liunx操作系统笔记（9.27）\image-20240927153437855.png)

## rmdir：删除没有任何内容的文件夹

```shell
rmdir 参数
```

![image-20240927154348752](imgs\Liunx操作系统笔记（9.27）\image-20240927154348752.png)

## 操作压缩格式（tar、gzip、zip）

- .tar，称之为tarball，归档文件，即简单的将文件组装到一个,tar的文件内，并没有太多文件体积的减少，仅仅是简单的封装
- .g2，也常见为.tar.gz，gzip格式压缩文件，即使用gzip压缩算法将文件压缩到一个文件内，可以极大的减少压缩后的体积

```shell
tar [-c -v -x -f -z -C] 压缩后的目标文件 参数1 参数2...参数N
```

- -c，创建压缩文件，用于压缩模式
- -v，显示压缩、解压过程，用于查看进度
- -x，解压模 式
- -f，要创建的文件，或要解压的文件，-f选项必须在所有选项中位置处于最后一个
- -z，gzip模式，不使用-z就是普通的tarball格式
- -C，选择解压的目的地，用于解压模式

```shell
tar -cvf test.rar {1..9}.txt
```

![image-20240927153935573](imgs\Liunx操作系统笔记（9.27）\image-20240927153935573.png)

```shell
tar -xvf test.rar -C Desktop
```

![image-20240927154015844](imgs\Liunx操作系统笔记（9.27）\image-20240927154015844.png)

zip的用法类似

```shell
zip [-m -f] 压缩文件 文件列表
```

- -m，压缩完成后删除源文件
- -r，按目录结构递归压缩目录中的所有文件

```shell
unzip [-l -t -n -o] 压缩文件 -d 目录名
```

- -l，查看压缩文件所包含的文件
- -t，测试压缩文件是否已经损坏
- -d 目录名，指定解压缩的目标目录
- -n，不覆盖同名文件
- -o，强制覆盖同名文件

## 用户与用户组

`用户名只能唯一`

| 路径        | 内容                 |
| :---------- | -------------------- |
| /etc/passwd | 存储用户的关键信息   |
| /etc/group  | 存储用户组的关键信息 |
| /etc/shadow | 存储用户的密码信息   |

| 名称     | UID范围   |
| -------- | --------- |
| 超级用户 | 0         |
| 系统用户 | 1-499/999 |
| 普通用户 | 1000      |

### /etc/password

```txt
username:password:uid:gid:userinfo:home:shell
```

| 字段     | 含义                                                         |
| -------- | ------------------------------------------------------------ |
| username | 用户账户名，在系统内用户账户名应该具有唯一性。               |
| password | 存放加密的用户密码，显示为x，其密码已被映射到/etc/shadow 文件中。 |
| uid      | 用户ID，在系统内用一个整数标识用户ID号，每个用户的UD都是惟一的，root 用户的 UID 是 0，普通用户的 UID 默认从 1000 开始。。 |
| gid      | 默认的用户组ID。每个组群的 GID 都是唯一的。                  |
| userinfo | 用户注释信息，针对用户名的描述。可以不设置。                 |
| home     | 分配给用户的主目录，用户登录系统后首先进入该目录。           |
| shell    | 用户登录默认的 shell(Linux系统默认的Shell 为/bin/bash)       |

![image-20240927165435198](imgs\Liunx操作系统笔记（9.27）\image-20240927165435198.png)

### /etc/shadow

```txt
username:password:lastchg:min:max:warn:inactive:expire:flag
```

| 字段     | 含义                                                         |
| -------- | ------------------------------------------------------------ |
| username | 用户账户名，该用户名与/etc/passwd中的用户名相同。            |
| password | 加密口令。如果有些用户在这里显示的是“!”，则表示这个用户还没有设置密码，不能登录到系统。 |
| lastchg  | 用户最后一次更改密码的日期，表示从1970年1月1日起到上次修改口令所经过的天数。 |
| min      | 密码允许更换前的天数，表示两次修改口令之间至少经过的天数。如果设置为0，则禁用此功能。 |
| max      | 密码需要更换的天数。表示口令还会有效的最大天数，如果是99999则表示永不过期。 |
| warn     | 密码更换前警告的天数，表示口令失效前多少天内系统向用户发出警告。 |
| inactive | 账户被取消激活前的天数，表示禁止登录前用户名还有效的天数。表示用户密码过期多少天后，系统会禁用此用户，也就是说系统会不让此用户登录，也不会提示用户过期，是完全禁用的。 |
| expire   | 表示用户被禁止登录的时间。指定用户账户禁用的天数(从1970年的1月1日开始到账户被禁用的天数)，如果这个字段的值为空，账户永久可用。 |
| flag     | 保留字段，用于未来扩展，暂未使用                             |

![image-20240927171609227](imgs\Liunx操作系统笔记（9.27）\image-20240927171609227.png)

### /etc/group

```txt
group_name:group_password:group_id:group_members
```

| 字段           | 含义                                                         |
| -------------- | ------------------------------------------------------------ |
| group_name     | 用户组名                                                     |
| group_password | 加密后的用户组口令，存放加密的组群密码，看到一个x，密码已被映射到/etc/gshadow 文件中 |
| group_id       | 用户组ID(GID)，在系统内用一个整数标识用户组 GID，每个用户组的GID 都是惟一的，默认普通用户组的GID从1000开始，root 用户组 GID是 0 |
| group_members  | 以逗号分隔的成员用户清单                                     |

![image-20240927165514826](imgs\Liunx操作系统笔记（9.27）\image-20240927165514826.png)

## Linux运行模式

```shell
cat /etc/init
```

| 级别 | 说明                                           |
| ---- | ---------------------------------------------- |
| 0    | 表示关机级别(不要将默认的运行级别设置为0)      |
| 1    | 单用户模式                                     |
| 2    | 多用户模式，不带NFS(NetworkFile System)        |
| 3    | 多用户模式，完全的多用户模式，命令行模式       |
| 4    | 没有被使用的模式(被保留模式)                   |
| 5    | x11，完整的图形化界面模式                      |
| 6    | 表示重启级别(不要将默认的运行级别设置成这个值) |

切换运行级别

```shell
init 运行级别
```

## 用户账户管理命令

必须在root模式下进行

### 添加用户

```shell
useradd 选项 用户名
```

- -g：表示指定的用户主组，选项的值可以是用户组的id，也可以是组名。
- -G：表示指定的用户附加组，选项的值可以是用户组的id，也可以是组名。
- -u：uid，用户的id(用户的标识符)

![image-20240927171925703](imgs\Liunx操作系统笔记（9.27）\image-20240927171925703.png)

### 修改用户

```shell
usermod 选项 用户名
```

- -g：表示指定的用户主组，选项的值可以是用户组的id，也可以是组名。
- -G：表示指定的用户附加组，选项的值可以是用户组的id，也可以是组名。
- -u：uid，用户的id(用户的标识符)可以自选设置号码。
- -l：:修改用户名

![image-20240927173030686](imgs\Liunx操作系统笔记（9.27）\image-20240927173030686.png)

linux不允许没有密码的用户登录到系统，因此前面创建的用户目前都处于锁定状态，需要设置密码后才能登录计算机。

```shell
passwd 用户名
```

在设置密码的时候也是没有任何输入提示的，放心输入，确保两次输入的密码一致，按下回车即可

**注意：**

- 从 root往普通用户切换不需要密码，但是反之则需要root密码;
- 切换用户之后前后的工作路径是不变的;
- 普通用户没有办法访问root用户家目录,但是反之则可以;

### 删除用户

```shell
userdel 选项 用户名
```

- -r：表示删除用户的同时，删除其家目录

![image-20240927173103295](imgs\Liunx操作系统笔记（9.27）\image-20240927173103295.png)

`已经登陆的用户无法被删除，但是未登录的用户可以正常删除。`

## kill：杀死进程

```shell
kill 进程号
```